{"ast":null,"code":"var _jsxFileName = \"/Users/jose/myprojects/ecommerce-shopping-cart/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Basket from './components/Basket';\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAddToCart = (e, product) => {\n      this.setState(state => {\n        const cartItems = state.cartItems;\n        let productAlreadyInCart = false;\n        cartItems.forEach(item => {\n          console.log('item', item);\n\n          if (item.id === product.id) {\n            productAlreadyInCart = true;\n            console.log('count1', item.count);\n            item.count += 1;\n            console.log('count2', item.count);\n          }\n        });\n        console.log('productAlreadyInCart', productAlreadyInCart);\n\n        if (!productAlreadyInCart) {\n          cartItems.push({ ...product,\n            count: 1\n          });\n        }\n\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    this.handleRemoveFromCart = (e, item) => {\n      this.setState(state => {\n        const cartItems = state.cartItems.filter(elm => elm.id !== item.id);\n        localStorage.setItem('cartItems', JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    this.state = {\n      products: [],\n      filteredProducts: [],\n      size: '',\n      sort: '',\n      cartItems: []\n    };\n    this.handleChangeSort = this.handleChangeSort.bind(this);\n    this.handleChangeSize = this.handleChangeSize.bind(this);\n    this.handleAddToCart = this.handleAddToCart.bind(this);\n    this.handleRemoveFromCart = this.handleRemoveFromCart.bind(this);\n  }\n\n  componentDidMount() {\n    // fetch(\"http://localhost:8000/products\").then(res => res.json())\n    // .then(data => this.setState({\n    //   products: data,\n    //   filteredProducts: data\n    // }));\n    if (localStorage.getItem('cartItems')) {\n      this.setState({\n        cartItems: JSON.parse(localStorage.getItem('cartItems'))\n      });\n    }\n  }\n\n  handleChangeSort(e) {\n    console.log('products', this.state.products);\n    this.setState({\n      sort: e.target.value\n    });\n    this.listProducts();\n  }\n\n  handleChangeSize(e) {\n    this.setState({\n      size: e.target.value\n    });\n    this.listProducts();\n  }\n\n  listProducts() {\n    this.setState(state => {\n      console.log(state.products);\n      console.log('sort', state.sort);\n      console.log('size', state.size);\n\n      if (state.sort !== '') {\n        console.log('boolean', state.sort === 'lowest');\n        state.products.sort((a, b) => state.sort === 'lowest' ? a.price - b.price : b.price - a.price);\n      } else {\n        state.products.sort((a, b) => b.id - a.id);\n      }\n\n      if (state.size !== '') {\n        return {\n          filteredProducts: state.products.filter(a => a.availableSizes.indexOf(state.size.toUpperCase()) >= 0)\n        };\n      }\n\n      return {\n        filteredProducts: state.products\n      };\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Provider, {\n      store: store,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, \"Ecommerce Shopping Cart Application\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Filter, {\n      size: this.state.size,\n      sort: this.state.sort,\n      handleChangeSize: this.handleChangeSize,\n      handleChangeSort: this.handleChangeSort,\n      count: this.state.filteredProducts.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Products, {\n      products: this.state.filteredProducts,\n      handleAddToCart: this.handleAddToCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Basket, {\n      cartItems: this.state.cartItems,\n      handleRemoveFromCart: this.handleRemoveFromCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jose/myprojects/ecommerce-shopping-cart/src/App.js"],"names":["React","Component","Products","Filter","Basket","Provider","store","App","constructor","props","handleAddToCart","e","product","setState","state","cartItems","productAlreadyInCart","forEach","item","console","log","id","count","push","localStorage","setItem","JSON","stringify","handleRemoveFromCart","filter","elm","products","filteredProducts","size","sort","handleChangeSort","bind","handleChangeSize","componentDidMount","getItem","parse","target","value","listProducts","a","b","price","availableSizes","indexOf","toUpperCase","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Basket from './components/Basket';\nimport {Provider} from 'react-redux';\nimport store from './store';\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {products:[], filteredProducts:[], size: '', sort: '', cartItems: []};\n    this.handleChangeSort = this.handleChangeSort.bind(this);\n    this.handleChangeSize = this.handleChangeSize.bind(this);\n    this.handleAddToCart = this.handleAddToCart.bind(this);\n    this.handleRemoveFromCart = this.handleRemoveFromCart.bind(this);\n  }\n  componentDidMount(){\n    // fetch(\"http://localhost:8000/products\").then(res => res.json())\n    // .then(data => this.setState({\n    //   products: data,\n    //   filteredProducts: data\n    // }));\n    if(localStorage.getItem('cartItems')){\n      this.setState({cartItems: JSON.parse(localStorage.getItem('cartItems'))});\n    }\n  }\n  handleChangeSort(e){\n    console.log('products',this.state.products)\n    this.setState({sort: e.target.value});\n    this.listProducts();\n  }\n  handleChangeSize(e){\n    this.setState({size: e.target.value});\n    this.listProducts();\n  }\n  listProducts(){\n    this.setState(state => {\n      console.log(state.products)\n      console.log('sort',state.sort)\n      console.log('size',state.size)\n      if (state.sort !== ''){\n        console.log('boolean', state.sort==='lowest' )\n        state.products.sort((a,b) => (state.sort==='lowest')? \n        (a.price - b.price) \n        : (b.price - a.price))\n      } else{\n        state.products.sort((a,b) => (b.id - a.id));\n      }\n      if (state.size !== ''){\n        return {\n          filteredProducts: state.products.filter(a => a.availableSizes.indexOf(state.size.toUpperCase())>=0)\n        };\n      }\n      return {filteredProducts: state.products};\n    })\n  }\n  handleAddToCart = (e, product) => {\n    this.setState(state => {\n      const cartItems = state.cartItems;\n      let productAlreadyInCart = false;\n\n      cartItems.forEach(item => {\n        console.log('item',item)\n        if(item.id === product.id){\n          productAlreadyInCart = true;\n          console.log('count1', item.count)\n          item.count += 1;\n          console.log('count2', item.count)\n        }\n      });\n      console.log('productAlreadyInCart', productAlreadyInCart)\n      if (!productAlreadyInCart){\n        cartItems.push({ ...product, count: 1 });\n      }\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n      return { cartItems: cartItems };\n    })\n  }\n  handleRemoveFromCart = (e, item) => {\n    this.setState(state => {\n      const cartItems = state.cartItems.filter(elm => elm.id !== item.id);\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n      return { cartItems: cartItems };\n    });\n  }\n  render() {\n    return(\n      <Provider store={store}>\n        <div className=\"Container\">\n          <h1>Ecommerce Shopping Cart Application</h1>\n          <hr/>\n          <div className=\"row\">\n            <div className=\"col-md-8\">\n              <Filter \n                size={this.state.size} \n                sort={this.state.sort} \n                handleChangeSize={this.handleChangeSize} \n                handleChangeSort={this.handleChangeSort} \n                count={this.state.filteredProducts.length} \n              />\n              <hr/>\n              <Products products={this.state.filteredProducts} handleAddToCart={this.handleAddToCart}/>\n            </div>\n            <div className=\"col-md-4\">\n              <Basket cartItems = {this.state.cartItems} handleRemoveFromCart={this.handleRemoveFromCart}/>\n            </div>\n          </div>\n        </div>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}