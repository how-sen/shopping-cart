{"ast":null,"code":"var _jsxFileName = \"/Users/jose/myprojects/ecommerce-shopping-cart/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Basket from './components/Basket';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      filteredProducts: [],\n      size: '',\n      sort: '',\n      cartItems: []\n    };\n    this.handleChangeSort = this.handleChangeSort.bind(this);\n    this.handleChangeSize = this.handleChangeSize.bind(this);\n    this.handleAddToCart = this.handleAddToCart.bind(this);\n  }\n\n  componentWillMount() {\n    fetch(\"http://localhost:8000/products\").then(res => res.json()).then(data => this.setState({\n      products: data,\n      filteredProducts: data\n    }));\n\n    if (localStorage.getItem('cartItem')) {\n      this.setState({\n        cartItems: JSON.parse(localStorage.getItem('cartItems'))\n      });\n    }\n  }\n\n  handleChangeSort(e) {\n    console.log('products', this.state.products);\n    this.setState({\n      sort: e.target.value\n    });\n    this.listProducts();\n  }\n\n  handleChangeSize(e) {\n    this.setState({\n      size: e.target.value\n    });\n    this.listProducts();\n  }\n\n  listProducts() {\n    this.setState(state => {\n      console.log(state.products);\n      console.log('sort', state.sort);\n      console.log('size', state.size);\n\n      if (state.sort !== '') {\n        console.log('boolean', state.sort === 'lowest');\n        state.products.sort((a, b) => state.sort === 'lowest' ? a.price - b.price : b.price - a.price);\n      } else {\n        state.products.sort((a, b) => b.id - a.id);\n      }\n\n      if (state.size !== '') {\n        return {\n          filteredProducts: state.products.filter(a => a.availableSizes.indexOf(state.size.toUpperCase()) >= 0)\n        };\n      }\n\n      return {\n        filteredProducts: state.products\n      };\n    });\n  }\n\n  handleAddToCart(e, product) {\n    this.setState(state => {\n      const cartItems = state.cartItems;\n      let productAlreadyInCart = false;\n      cartItems.forEach(item => {\n        if (item.id === product.id) {\n          productAlreadyInCart = true;\n          item.count++;\n        }\n      });\n\n      if (!productAlreadyInCart) {\n        cartItems.push({ ...product,\n          count: 1\n        });\n      }\n\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n      return cartItems;\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, \"Ecommerce Shopping Cart Application\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Filter, {\n      size: this.state.size,\n      sort: this.state.sort,\n      handleChangeSize: this.handleChangeSize,\n      handleChangeSort: this.handleChangeSort,\n      count: this.state.filteredProducts.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Products, {\n      products: this.state.filteredProducts,\n      handleAddToCart: this.handleAddToCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Basket, {\n      cartItems: this.state.cartItems,\n      handleRemoveFromCart: this.handleRemoveCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jose/myprojects/ecommerce-shopping-cart/src/App.js"],"names":["React","Component","Products","Filter","Basket","App","constructor","props","state","products","filteredProducts","size","sort","cartItems","handleChangeSort","bind","handleChangeSize","handleAddToCart","componentWillMount","fetch","then","res","json","data","setState","localStorage","getItem","JSON","parse","e","console","log","target","value","listProducts","a","b","price","id","filter","availableSizes","indexOf","toUpperCase","product","productAlreadyInCart","forEach","item","count","push","setItem","stringify","render","length","handleRemoveCart"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Basket from './components/Basket';\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {products:[], filteredProducts:[], size: '', sort: '', cartItems: []};\n    this.handleChangeSort = this.handleChangeSort.bind(this);\n    this.handleChangeSize = this.handleChangeSize.bind(this);\n    this.handleAddToCart = this.handleAddToCart.bind(this);\n  }\n  componentWillMount(){\n    fetch(\"http://localhost:8000/products\").then(res => res.json())\n    .then(data => this.setState({\n      products: data,\n      filteredProducts: data\n    }));\n    if(localStorage.getItem('cartItem')){\n      this.setState({cartItems: JSON.parse(localStorage.getItem('cartItems'))});\n    }\n  }\n  handleChangeSort(e){\n    console.log('products',this.state.products)\n    this.setState({sort: e.target.value});\n    this.listProducts();\n  }\n  handleChangeSize(e){\n    this.setState({size: e.target.value});\n    this.listProducts();\n  }\n  listProducts(){\n    this.setState(state => {\n      console.log(state.products)\n      console.log('sort',state.sort)\n      console.log('size',state.size)\n      if (state.sort !== ''){\n        console.log('boolean', state.sort==='lowest' )\n        state.products.sort((a,b) => (state.sort==='lowest')? \n        (a.price - b.price) \n        : (b.price - a.price))\n      } else{\n        state.products.sort((a,b) => (b.id - a.id));\n      }\n      if (state.size !== ''){\n        return {\n          filteredProducts: state.products.filter(a => a.availableSizes.indexOf(state.size.toUpperCase())>=0)\n        };\n      }\n      return {filteredProducts: state.products};\n    })\n  }\n  handleAddToCart(e, product){\n    this.setState(state => {\n      const cartItems = state.cartItems;\n      let productAlreadyInCart = false;\n      cartItems.forEach(item => {\n        if(item.id === product.id){\n          productAlreadyInCart = true;\n          item.count++;\n        }\n      });\n      if (!productAlreadyInCart){\n        cartItems.push({...product, count:1});\n      }\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n      return cartItems;\n    })\n  }\n  render() {\n    return(\n      <div className=\"Container\">\n      <h1>Ecommerce Shopping Cart Application</h1>\n      <hr/>\n      <div className=\"row\">\n        <div className=\"col-md-8\">\n          <Filter \n            size={this.state.size} \n            sort={this.state.sort} \n            handleChangeSize={this.handleChangeSize} \n            handleChangeSort={this.handleChangeSort} \n            count={this.state.filteredProducts.length} \n          />\n          <hr/>\n          <Products products={this.state.filteredProducts} handleAddToCart={this.handleAddToCart}/>\n        </div>\n        <div className=\"col-md-4\">\n          <Basket cartItems = {this.state.cartItems} handleRemoveFromCart={this.handleRemoveCart}/>\n        </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}